<ion-view>
	<ion-nav-bar align-title="center" class="bar-light">
		<a ui-sref="home" class="button back-button buttons button-clear header-item"><i class="icon ion-ios-arrow-back"></i> <span class="back-text"><span class="default-title">Home</span></span></a>
		<ion-nav-title>
			<div ng-if="user.displayName">
				Welcome, {{ user.displayName }} (<a href="/" prevent-default ng-click="vm.logout()">logout</a>)
			</div>
			<div ng-if="!user.displayName">
				<button ng-click="vm.login('facebook')" class="">
				<i class="ion-social-facebook"></i> Log in with Facebook
				</button>
				<button ng-click="vm.login('google')" class="">
				<i class="ion-social-google"></i> Log in with Google+
				</button>
				<button ng-click="vm.login('github')" class="">
				<i class="ion-social-github"></i> Log in with Github
				</button>
			</div>
		</ion-nav-title>
		<ion-nav-buttons side="right">
			<a class="button button-icon icon ion-plus-circled" ui-sref="new"></a>
		</ion-nav-buttons>
	</ion-nav-bar>
	<ion-content>
		<h1 class="account-title center-align">
			<div ng-if="user">
				{{vm.tasks.length}} Tasks
			</div>
			<div ng-if="!user && vm.tasks !== undefined">
				Community Tasks
			</div>
		</h1>
		<div can-swipe="true">
			<div ng-repeat="item in vm.tasks" ng-class="{ 'active' : item.id === vm.active }">
				<div class="row">
					<div class="col col-20" style="display: flex;justify-content: flex-end;align-items: center;">
						<button class="button button-clear" style="font-size:2rem !important" ng-click="vm.setStatus(item)">
							<i class="ion ion-checkmark-circled" ng-class="{ 'balanced' : item.complete }"></i>
						</button>
					</div>
					<div class="col col-80" on-tap="vm.setActive(item._id)">
						<h2>{{ item.title }}</h2>
						<p>{{ item.body }}</p>
						<label class="dark">
							{{ item.dt_create | date : "short"}}
						</label>
					</div>
				</div>
				<div class="item-options">
					<button class="button-energized ion-edit" ui-sref="edit({ id : item._id })"></button>
					<button class="button-assertive ion-trash-a" ng-click="vm.deleteTask(item._id)"></button>
				</div>
			</div>
		</div>

		<div class="card" ng-show="vm.tasks.length === 0">
			<div class="item item-body center-align">
				<h2 class="dark">
					Umm..it's empty in here..
				</h2>
				<h2 class="dark">
					Try adding a task by clicking the <i class="ion-plus-circled dark"></i>icon in the top right corner.
				</h2>
			</div>
		</div>


	</ion-content>
</ion-view>