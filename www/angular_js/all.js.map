{
  "version": 3,
  "file": "all.js",
  "sources": [
    "www/angular_js/app.js",
    "www/angular_js/components.js",
    "www/angular_js/controllers.js",
    "www/angular_js/directives.js",
    "www/angular_js/filters.js",
    "www/angular_js/services.js"
  ],
  "names": [],
  "mappings": "AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "sourcesContent": [
    "angular.module('ListModule', ['ui.router', 'angularModalService', 'ListModule.components', 'ListModule.filters', 'ListModule.directives', 'ListModule.controllers', 'ListModule.services'])\n\n.run(function ($rootScope, $injector) {\n\twindow.inject = function(who){\n\t\treturn $injector.get([who]);\n\t};\n\t$rootScope.client = window.client;\n})\n\n.controller('Modal', function($scope, close, vm) {\n\tif (vm) {\n\t\t$scope.vm = vm;\n\t}\n\t$scope.close = function(result) {\n\t\tclose(result, 500);\n\t};\n})\n\n.config(function ($stateProvider, $urlRouterProvider, $httpProvider, $locationProvider) {\n\t$locationProvider.html5Mode({\n\t\tenabled: true,\n\t\trequireBase: false\n\t});\n\t$httpProvider.defaults.headers.post['Cache-Control'] = 'no-cache';\n\t$httpProvider.defaults.headers.post['Pragma'] = 'no-cache';\n\tdelete $httpProvider.defaults.headers.common['X-Requested-With'];\n\n\t$urlRouterProvider.otherwise('/');\n\n\t$stateProvider\n\t.state('home', {\n\t\tcache: false,\n\t\turl: '/',\n\t\ttemplateUrl: 'angular_html/lists.html',\n\t\tcontroller: \"ListController\",\n\t\tcontrollerAs: \"vm\"\n\t});\n\n})\n\n;\n",
    "angular.module('ListModule.components', [])\n\n.directive('eventslist', function(EventService, $timeout, $rootScope){\n\treturn {\n\t\trestrict: 'A',\n\t\tscope: {\n\t\t\tdata: '='\n\t\t},\n\t\tlink: function (scope, element, attrs) {\n\t\t\tscope.vm = {};\n\t\t\tscope.data.count = 1;\n\n\t\t\t// template\n\t\t\tvar template = function(events) {\n\t\t\t\tvar old_timestring = '';\n\t\t\t\tvar old_event_titles = {};\n\t\t\t\tvar old_event_featured_images = [];\n\t\t\t\tvar old_date = '';\n\t\t\t\tscope.data.count = 0; // will be advanced if pass validation below\n\t\t\t\tif (events.length) {\n\n\t\t\t\t\tvar html = '\t\t<div class=\"my-events\">\\n';\n\t\t\t\t\tfor (var each in events) {\n\t\t\t\t\t\tvar event = events[each];\n\n\t\t\t\t\t\t// validate\n\t\t\t\t\t\tif (!event.texts) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (old_event_titles[ event.texts[0].replace(/\\w/g,'') ]) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\told_event_titles[ event.texts[0].replace(/\\w/g,'') ] = true;\n\n\t\t\t\t\t\t// build\n\t\t\t\t\t\tvar timestring = Date.create(event.timestamp).short();\n\t\t\t\t\t\tvar todayEnd = moment().endOf('day').format('x');\n\t\t\t\t\t\tif (event.timestamp < todayEnd -1) { // party must end before midnight, because we don't know when exactly tomorrow's dates are, most come in as 12:00am\n\t\t\t\t\t\t\ttimestring = 'today';\n\t\t\t\t\t\t} else if (event.timestamp < todayEnd -1 + 1000*60*60*24) {\n\t\t\t\t\t\t\ttimestring = 'tomorrow';\n\t\t\t\t\t\t} else if (event.timestamp < todayEnd -1 + 1000*60*60*24 *6) {\n\t\t\t\t\t\t\ttimestring = 'this week';\n\t\t\t\t\t\t} else if (event.timestamp < todayEnd -1 + 1000*60*60*24 *30) {\n\t\t\t\t\t\t\ttimestring = 'this month';\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//event.timestamp = event.timestamp.replace(' 12:00am','');\n\t\t\t\t\t\tif (!scope.data.time && timestring != old_timestring) {\n\t\t\t\t\t\t\t//var timeUnique = cutOldBeginning(old_timestamp, event.timestamp);\n\t\t\t\t\t\t\thtml += '<div class=\"events-timestamp-spacer\"> </div>\\n';\n\t\t\t\t\t\t\thtml += '<div class=\"events-timestamp\"><span>' + timestring + '</span></div>\\n';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar ev = '';\n\t\t\t\t\t\tev += '\t\t<div class=\"events-event '+ (event.featured?'event-featured':'') +'\" style=\"background-image:url(\\'' + event.featured + '\\');\">';\n\t\t\t\t\t\tev += '\t\t\t<div class=\"event-text\">\\n';\n\t\t\t\t\t\tif (event.texts[0]) {\n\t\t\t\t\t\t\tev += '\t\t\t<span><a class=\"event-link\" href=\"' + event.link + '\" target=\"_blank\" prevent-default onClick=\"window.open(\\'' + event.link + '\\', \\'_system\\')\">' + event.texts[0] + '</a></span>\\n';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (event.image) {\n\t\t\t\t\t\t\tev += '\t\t\t<span class=\"event-image\"><img src=\"' + event.image + '\" /></span>\\n';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (event.texts[1]) {\n\t\t\t\t\t\t\tev += '\t\t\t<span>' + event.texts[1] + '</span>\\n';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (event.texts[2]) {\n\t\t\t\t\t\t\tev += '\t\t\t<span>' + event.texts[2] + '</span>\\n';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tev += '\t\t\t</div>\\n';\n\t\t\t\t\t\tev += '\t\t\t<div class=\"event-subtext\">\\n';\n\n\t\t\t\t\t\tvar time = moment(event.timestamp).format('h:mma');\n\t\t\t\t\t\tif (time=='12:00am') {\n\t\t\t\t\t\t\ttime = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tev += '\t\t<span ng-click><span class=\"icon-star\"></span> </span>\\n';\n\t\t\t\t\t\tif (timestring.indexOf('week') !=1 || timestring.indexOf('month') !=1) {\n\t\t\t\t\t\t\tev += '\t\t<span ng-click><span class=\"ion-calendar\"></span> <span>' + moment(event.timestamp).format('MMM D') +' '+time+ '</span></span>\\n';\n\t\t\t\t\t\t} else if (time && time!='12:00am') {\n\t\t\t\t\t\t\tev += '\t\t<span ng-click><span class=\"ion-calendar\"></span> <span>' + time + '</span></span>\\n';\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// if (event.price) {\n\t\t\t\t\t\t// \tev += '\t\t\t<span class=\"subtext-price\"><span class=\"ion-pricetag\"></span> <span>'+event.price+'</span></span>\\n';\n\t\t\t\t\t\t// }\n\t\t\t\t\t\tev += '\t\t\t<a class=\"subtext-source\" href=\"' + event.source_link + '\" target=\"_blank\" prevent-default onClick=\"window.open(\\'' + event.source_link + '\\', \\'_system\\')\"><span class=\"icon-link\"></span> ' + (event.source_host.substr(0, event.source_host.indexOf('.'))) + '</a>\\n';\n\t\t\t\t\t\t// ev += '\t\t\t<span class=\"subtext-fave\" ng-click=\"\"><span class=\"icon-star-outline\"></span></span>\\n';\n\t\t\t\t\t\tev += '\t\t\t</div>\\n';\n\t\t\t\t\t\tev += '\t\t</div>';\n\t\t\t\t\t\t//\n\t\t\t\t\t\thtml += ev;\n\t\t\t\t\t\told_timestring = timestring;\n\n\t\t\t\t\t\tscope.data.count++;\n\n\n\t\t\t\t\t\t// <event>\n\t\t\t\t\t\tif (event.featured) {\n\t\t\t\t\t\t\tvar event_featured = JSON.parse(JSON.stringify(event));\n\t\t\t\t\t\t\tif (old_event_featured_images.indexOf(event_featured.image) == -1) {\n\t\t\t\t\t\t\t\tevent_featured.eventsHTML = $sce.trustAsHtml(ev);\n\t\t\t\t\t\t\t\tvm.featuredEvents[event.random] = event_featured;\n\t\t\t\t\t\t\t\told_event_featured_images.push(event_featured.image);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// </event>\n\t\t\t\t\t\t\n\n\t\t\t\t\t}\n\t\t\t\t\thtml += '\t\t</div>\\n';\n\n\t\t\t\t\treturn html;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add\n\t\t\tscope.list_ready = function(){\n\t\t\t\tvar query = {};\n\t\t\t\tquery.category = scope.data.category;\n\t\t\t\tquery.text = scope.data.text;\n\t\t\t\tquery.time = scope.data.time;\n\t\t\t\tEventService.getEvents(query)\n\t\t\t\t.then(function (response) {\n\t\t\t\t\t//scope.vm.events = response.data.data;\n\t\t\t\t\tangular.element(element)[0].innerHTML = template(response.data.data);\n\t\t\t\t\tif (!$rootScope.initiallyLoaded) {\n\t\t\t\t\t\tdocument.getElementById('stats').innerHTML = '<span>loaded in '+((Date.now()-window.loadStart)/1000)+'s</span>';\n\t\t\t\t\t\twindow.setTimeout(function(){\n\t\t\t\t\t\t\t$rootScope.initiallyLoaded = true;\n\t\t\t\t\t\t},500);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdocument.getElementById('stats').innerHTML = '';\n\t\t\t\t\t}\n\t\t\t\t}, function (error) {\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// remove\n\t\t\tscope.list_reset = function(){\n\t\t\t\t//scope.vm = {};\n\t\t\t\tscope.data.count = 0;\n\t\t\t\tangular.element(element)[0].innerHTML = '<div class=\"loading-dance\" style=\"background-image:url(\\'gfx/gif/dance.gif\\')\"></div>';\n\t\t\t\t$timeout(function(){\n\t\t\t\t\tif (element) {\n\t\t\t\t\t\t$(element).addClass('ready');\n\t\t\t\t\t}\n\t\t\t\t},500);\n\t\t\t}\n\n\t\t\t// lazyload\n\t\t\tscope.list_reset();\n\t\t\tif (!$rootScope.lazyLoadedLists) {\n\t\t\t\t$rootScope.lazyLoadedLists = {};\n\t\t\t}\n\t\t\tscope.element = element;\n\t\t\tvar lazy_load = function(){\n\t\t\t\telement = scope.element;\n\t\t\t\tvar window_width = (document.body.clientWidth || document.documentElement.clientWidth || document.clientWidth ||window.innerWidth);\n\t\t\t\tvar rect = element[0].getBoundingClientRect();\n\t\t\t\tif (rect.left > 0 && rect.left < window_width) {\n\n\t\t\t\t\tif (!$rootScope.lazyLoadedLists[ scope.data.category ]) {\n\t\t\t\t\t\t$rootScope.lazyLoadedLists[ scope.data.category ] = scope;\n\t\t\t\t\t\tscope.list_ready();\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tif ($rootScope.lazyLoadedLists[ scope.data.category ]) {\n\t\t\t\t\t\tdelete $rootScope.lazyLoadedLists[ scope.data.category ];\n\t\t\t\t\t\tscope.list_reset();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tscope.$watch(lazy_load);\n\t\t\t$(window).on(\"resize.doResize\", lazy_load);\n\t\t\tscope.$on(\"$destroy\",function (){\n\t\t\t\t$(window).off(\"resize.doResize\");\n\t\t\t});\n\t\t}\n\t}\n})",
    "angular.module('ListModule.controllers', [])\n\n.controller('ListController', [\"ModalService\", \"AccountService\", \"ListService\", \"EventService\", \"ContentService\", \"$window\", \"$scope\", \"$rootScope\", \"$state\", \"$timeout\", \"$stateParams\", \"$sce\", \"$compile\", \"$interpolate\", \"$parse\", \"$q\", function (ModalService, AccountService, ListService, EventService, ContentService, $window, $scope, $rootScope, $state, $timeout, $stateParams, $sce, $compile, $interpolate, $parse, $q) {\n\twindow.ListController = this;\n\tvar errorHandler = function (options) {\n\t\tconsole.warn(options);\n\t}\n\n\t/*\n\t\tMODELS\n\t*/\n\tvar vm = this;\n\tvm.listsReady = 0;\n\tvm.list = {\n\t\tdata: {}\n\t};\n\tvm.lists = {};\n\tvm.lists_new = {};\n\tvm.featuredEvents = {};\n\n\n\t/*\n\t\tMODALS\n\t*/\n\tvar modal_timeout = 0;\n\t$rootScope.modals = {opened:[]};\n\t$rootScope.modals.close = function() {\n\t\tfor (var mo in $rootScope.modals.opened) {\n\t\t\t$rootScope.modals.opened[ mo ].scope.close();\n\t\t\tdelete $rootScope.modals.opened[ mo ];\n\t\t\tmodal_timeout = 1000;\n\t\t}\n\t}\n\t$rootScope.modals.show = function(name) {\n\t\t$rootScope.modals.close();\n\t\t$timeout(function(){\n\t\t\tModalService.showModal({\n\t\t\t\ttemplateUrl: name,\n\t\t\t\tcontroller: \"Modal\",\n\t\t\t\tinputs: {\n\t\t\t\t\tvm: vm\n\t\t\t\t}\n\t\t\t}).then(function(modal) {\n\t\t\t\t$rootScope.modals.opened.push( modal );\n\t\t\t\tmodal.scope.$on('$destroy', function(){\n\t\t\t\t\tfor (var mo in $rootScope.modals.opened) {\n\t\t\t\t\t\tdelete $rootScope.modals.opened[ mo ];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tmodal.close.then(function(result) {\n\t\t\t\t\t$scope.message = \"You said \" + result;\n\t\t\t\t});\n\t\t\t});\n\t\t},modal_timeout);\n\t};\n\n\n\t/*\n\t\tLISTS\n\t*/\n\tvm.listsGet = function() {\n\t\tvm.listsGetDefault(); // if user has saved lists, they will override, so this will be just to get categories/sites/scenes\n\t\tvm.listsGetUser();\n\t};\n\tvm.listsGetDefault = function() {\n\t\t// from Default\n\t\tContentService.getAll().then(\n\t\t\tfunction (all) {\n\t\t\t\t// lists\n\t\t\t\tall.categories.forEach(function (item, i, array) {\n\t\t\t\t\tvar list = {\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tcategory: array[i].title,\n\t\t\t\t\t\t\tscene: '',\n\t\t\t\t\t\t\ttext: '',\n\t\t\t\t\t\t\tlikes: array[i].likes,\n\t\t\t\t\t\t\taddedOn: array.length - i\n\t\t\t\t\t\t},\n\t\t\t\t\t\tquery: {\n\t\t\t\t\t\t\tcategory: array[i].title,\n\t\t\t\t\t\t\tscene: '',\n\t\t\t\t\t\t\ttext: ''\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tlist.data.uid = list.data.category;\n\t\t\t\t\tif (!vm.lists[list.data.uid] || ( vm.lists[list.data.uid].data && vm.lists[list.data.uid].data.addedOn < list.data.addedOn ) ) {\n\t\t\t\t\t\tvm.lists[list.data.uid] = list;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tvm.syncLists();\n\t\t\t\t$timeout(function(){\n\t\t\t\t\tvm.listsReady = true;\n\t\t\t\t},0);\n\t\t\t\t// content\n\t\t\t\tvm.categories = all.categories;\n\t\t\t\tvm.scenes = all.scenes;\n\t\t\t\tvm.sites = all.sites;\n\t\t\t\tvm.eventsCount = all.eventsCount;\n\t\t\t},\n\t\t\tfunction (error) {\n\t\t\t}\n\t\t);\n\t}\n\tvm.listsGetUser = function () {\n\t\t// from Database\n\t\tvar getUserLists = function() {\n\t\t\tListService.getUserLists().then(function (response) {\n\t\t\t\tresponse.data.forEach(function (row, ro, rows) {\n\t\t\t\t\tvar lists = rows[ro].data;\n\t\t\t\t\tfor (var li in lists) {\n\t\t\t\t\t\tif (!lists[li].data || !lists[li].data.addedOn) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar list = {\n\t\t\t\t\t\t\tdata: lists[li].data\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (!vm.lists[list.data.uid] || list.data.addedOn > vm.lists[list.data.uid].data.addedOn) {\n\t\t\t\t\t\t\tvm.lists[list.data.uid] = list;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (Object.keys(vm.lists).length) {\n\t\t\t\t\tvm.syncLists();\n\t\t\t\t}\n\t\t\t},\n\t\t\tfunction (error) {\n\t\t\t\tvm.listsGetDefault();\n\t\t\t});\n\t\t};\n\n\t\tif ($rootScope.user) {\n\t\t\tgetUserLists();\n\t\t} else {\n\t\t\tAccountService.currentUser().then(\n\t\t\t\tfunction (responseData) {\n\t\t\t\t\t$rootScope.user = responseData;\n\t\t\t\t\tgetUserLists();\n\t\t\t\t},\n\t\t\t\tfunction (error) {\n\t\t\t\t\tvm.listsGetDefault();\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t}\n\n\n\t/*\n\t\tLIST \n\t*/\n\tvm.listAdd = function (list) {\n\t\tif (list && list.data) {\n\t\t\tangular.extend( vm.list.data, list.data);\n\t\t}\n\n\t\tvm.listJustAdded = true;\n\t\tfunction removeJustAdded() {\n\t\t\tfor (var li in vm.lists) {\n\t\t\t\tvm.listJustAdded = false;\n\t\t\t\tvm.lists[li].justAdded = false;\n\t\t\t}\n\t\t}\n\t\t$rootScope.modals.close();\n\t\tif ($rootScope.lazyLoadedLists[ vm.list.data.category ]) {\n\t\t\tdelete $rootScope.lazyLoadedLists[ vm.list.data.category ];\n\t\t}\n\t\t// <lists>\n\t\t// make\n\t\tvm.list.data.addedOn = Date.now();\n\t\tvm.list.data.uid = vm.list.data.category;\n\t\t// star\n\t\tvm.list.justAdded = true;\n\t\t$timeout(function () {\n\t\t\tremoveJustAdded();\n\t\t}, 1500);\n\t\t// add\n\t\tvm.lists[vm.list.data.uid] = vm.list;\n\t\tvar listsIds = Object.keys(vm.lists)\n\t\t\t.sort(function (a, b) {\n\t\t\t\treturn (vm.lists[b].data.addedOn - vm.lists[a].data.addedOn)\n\t\t\t});\n\t\tvm.list = {\n\t\t\tdata: {}\n\t\t};\n\t\tvm.syncListsUp();\n\t\t// </lists>\n\t}\n\tvm.listHide = function (list) {\n\t\tif (list && list.data) {\n\t\t\tangular.extend( vm.list.data, list.data);\n\t\t}\n\n\t\t$rootScope.modals.close();\n\t\tif ($rootScope.lazyLoadedLists[ list.data.category ]) {\n\t\t\tdelete $rootScope.lazyLoadedLists[ list.data.category ];\n\t\t}\n\t\t// <lists>\n\t\tvm.list.data.addedOn = 10000000000 - Math.round(Date.now() / 1000); // hack - will work fine unless they wait for like an entire week to hide the next list\n\t\tvm.list.data.uid = vm.list.data.category;\n\t\t// add\n\t\tvm.lists[vm.list.data.uid] = vm.list;\n\t\tvar listsIds = Object.keys(vm.lists)\n\t\t\t.sort(function (a, b) {\n\t\t\t\treturn (vm.lists[b].data.addedOn - vm.lists[a].data.addedOn)\n\t\t\t});\n\t\tvm.list = {\n\t\t\tdata: {}\n\t\t};\n\t\tvm.syncListsUp();\n\t\t// </lists>\n\t}\n\n\n\t/* \n\t\tSYNC\n\t*/\n\tvar syncLocalUp = function () {\n\t\tvar localStorage_lists = JSON.parse(window.localStorage.lists||'{}');\n\t\tfor (var li in vm.lists) {\n\t\t\t// sync Up\n\t\t\tlocalStorage_lists[li] = {data:vm.lists[li].data};\n\t\t}\n\t\twindow.localStorage.lists = angular.toJson(localStorage_lists);\n\t}\n\tvar syncLocal = function () {\n\t\tvar localStorage_lists = JSON.parse(window.localStorage.lists||'{}');\n\t\tfor (var li in vm.lists) {\n\t\t\tif ( localStorage_lists[li] && localStorage_lists[li].data && localStorage_lists[li].data.addedOn > vm.lists[li].data.addedOn ) {\n\t\t\t\t// sync Down\n\t\t\t\tvm.lists[li] = {data:localStorage_lists[li].data};\n\t\t\t} else {\n\t\t\t\t// sync Up\n\t\t\t\tlocalStorage_lists[li] = vm.lists[li];\n\t\t\t}\n\t\t}\n\t\twindow.localStorage.lists = angular.toJson(localStorage_lists);\n\t}\n\tvar syncRemoteUp = function () {\n\t\t// // database\n\t\tvar listData = {};\n\t\tfor (var li in vm.lists) {\n\t\t\tif (vm.lists[li].data && vm.lists[li].data.addedOn) {\n\t\t\t\tlistData[li] = {data:vm.lists[li].data};\n\t\t\t}\n\t\t}\n\t\tif (Object.keys(vm.lists).length) {\n\t\t\tListService.deleteAll();\n\t\t\tListService.addNew({data:listData})\n\t\t\t.then(function(list) {\n\t\t\t}, function(error) {\n\t\t\t})\n\t\t}\n\n\t}\n\tvar syncRemote = function () {\n\t\tsyncRemoteUp();\n\t}\n\tvm.syncListsUp = function () {\n\t\tsyncLocalUp();\n\t\tsyncRemoteUp();\n\t};\n\tvm.syncLists = function () {\n\t\tsyncLocal();\n\t\tsyncRemote();\n\t};\n\n\n\t/*\n\t\tLOGIN\n\t*/\n\tvm.login = function (socialProvider) {\n\t\t//console.info('Logging you in using Facebook (still working on domain settings for other social providers)');\n\t\t//socialProvider = 'facebook';\n\t\tStamplay.User.socialLogin(socialProvider);\n\t\tAccountService.currentUser()\n\t\t\t.then(function (responseData) {\n\t\t\t\t$rootScope.user = responseData;\n\t\t\t\tvm.listsGetUser();\n\t\t\t}, function (error) {\n\t\t\t\tconsole.error(error);\n\t\t\t})\n\t}\n\tvm.logout = function () {\n\t\tvm.syncListsUp();\n\t\twindow.localStorage.clear();\n\t\tAccountService.logout();\n\t\tAccountService.currentUser()\n\t\t\t.then(function (responseData) {\n\t\t\t\twindow.localStorage.clear();\n\t\t\t\tvm.lists = {};\n\t\t\t\t$rootScope.user = responseData;\n\t\t\t\tvm.listsGetDefault(true);\n\t\t\t\t$rootScope.modals.close();\n\t\t\t}, function (error) {\n\t\t\t\tconsole.error(error);\n\t\t\t\t$rootScope.modals.close();\n\t\t\t})\n\t}\n\t$scope.$on('$destroy', vm.syncLists);\n\twindow.onbeforeunload = vm.syncLists;\n\n\n\t/*\n\t\tINIT \n\t*/\n\tvm.listsGet();\n\n\n}])\n;",
    "angular.module('ListModule.directives', [])\n\n.directive('preventDefault', function () {\n\treturn function (scope, element, attrs) {\n\t\t$(element)\n\t\t\t.click(function (event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t});\n\t}\n})\n\n.directive('hoverfocus', function () {\n\treturn function (scope, element, attrs) {\n\t\t$(element)\n\t\t\t.hover(function (event) {\n\t\t\t\t$(element)\n\t\t\t\t\t.find('input')\n\t\t\t\t\t.focus()\n\t\t\t\t\t.bind('keypress', function (e) {\n\t\t\t\t\t\tvar code = (e.keyCode ? e.keyCode : e.which);\n\t\t\t\t\t\tif (code == 13) {\n\t\t\t\t\t\t\t$(this).blur();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t});\n\t}\n})\n.directive('logScope', function () {\n\treturn {\n\t\trestrict: 'A',\n\t\tscope: {\n\t\t},\n\t\tlink: function (scope, element, attrs) {\n\t\t\tvar scope = scope.$parent.$parent || scope.$parent || scope;\n\t\t\tvar data = {};\n\t\t\tfor (var key in scope) {\n\t\t\t\tif (key.substr(0,1)!=='$') {\n\t\t\t\t\tdata[key] = scope[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar title = scope.$parent ? 'scope' : 'rootScope';\n\t\t}\n\t}\n})\n\n.directive('scrollTop', function ($rootScope) {\n\treturn {\n\t\trestrict: 'A',\n\t\tlink: function (scope, element, attrs) {\n\t\t\t$(element).scroll(function(){\n\t\t\t\tif (element[0].scrollTop) {\n\t\t\t\t\tscope.scrolled = true;\n\t\t\t\t\t$(element).addClass('scrolled');\n\t\t\t\t} else {\n\t\t\t\t\tscope.scrolled = false;\n\t\t\t\t\t$(element).removeClass('scrolled');\n\t\t\t\t}\n\t\t\t});\n\t\t\t$(element).bind('mousewheel', function(e) {\n\t\t\t\tif (scope.scrolled) {\n\t\t\t\t\tif (e.originalEvent.wheelDelta /120 > 0) {\n\t\t\t\t\t\tif (element[0].scrollTop===0) {\n\t\t\t\t\t\t\tscope.scrolled = false;\n\t\t\t\t\t\t\t$(element).removeClass('scrolled');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tscope.$on('$destroy',function(){\n\t\t\t\t$(element).unbind('scroll');\n\t\t\t\t$(element).unbind('mousewheel');\n\t\t\t})\n\t\t}\n\t}\n})\n.directive('scrollTopHelper', function ($rootScope) {\n\treturn {\n\t\trestrict: 'A',\n\t\tlink: function (scope, element, attrs) {\n\t\t\t$(element).scroll(function(){\n\t\t\t\tif (element[0].scrollTop) {\n\t\t\t\t\t$('[scroll-top]').addClass('scrolled');\n\t\t\t\t} else {\n\t\t\t\t\t$('[scroll-top]').removeClass('scrolled');\n\t\t\t\t}\n\t\t\t});\n\t\t\tscope.$on('$destroy',function(){\n\t\t\t\t$(element).unbind('scroll');\n\t\t\t})\n\t\t}\n\t}\n})\n\n.directive('scrollable', function ($timeout) {\n\treturn {\n\t\trestrict: 'A',\n\t\tscope: {\n\t\t\twhich: '='\n\t\t},\n\t\tlink: function (scope, element, attrs) {\n\n\t\t\t// to scroll or not to scroll\n\t\t\tscope.$watch(\n\t\t\t\tfunction () {\n\t\t\t\t\tif (scope.$parent.vm.listJustAdded) {\n\t\t\t\t\t\treturn scope.$parent.vm.listJustAdded;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfunction (newValue, oldValue) {\n\t\t\t\t\t// scroll to beginning\n\t\t\t\t\tif (newValue && newValue != oldValue) {\n\t\t\t\t\t\tvar target = element[0];\n\t\t\t\t\t\tvar duration = 400; // target.clientWidth / 2;\n\n\t\t\t\t\t\tvar scrollTo = 0;\n\t\t\t\t\t\ttarget.doNotScroll = 'scroll--changed';\n\t\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t\t$(target)\n\t\t\t\t\t\t\t\t.animate({\n\t\t\t\t\t\t\t\t\tscrollLeft: 0\n\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\tduration: duration\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t$timeout(\n\t\t\t\t\t\t\t\tscope.scrollCheck,\n\t\t\t\t\t\t\t\tduration + 10\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t}, 100);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\n\t\t\t// the arrows\n\t\t\t$(element)\n\t\t\t.siblings('[scrollable-left]')\n\t\t\t.click(function () {\n\t\t\t\tvar target = element[0];\n\t\t\t\tif (target.doNotScroll) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar duration = 400;\n\n\t\t\t\tvar scrollTo = target.scrollLeft - target.clientWidth;\n\t\t\t\t$(target)\n\t\t\t\t\t.animate({\n\t\t\t\t\t\tscrollLeft: scrollTo\n\t\t\t\t\t}, {\n\t\t\t\t\t\tduration: duration\n\t\t\t\t\t});\n\n\t\t\t\ttarget.doNotScroll = 'scrollable-left';\n\t\t\t\t$timeout(\n\t\t\t\t\tscope.scrollCheck,\n\t\t\t\t\tduration\n\t\t\t\t);\n\t\t\t});\n\t\t\t$(element)\n\t\t\t.siblings('[scrollable-right]')\n\t\t\t.click(function () {\n\t\t\t\tvar target = element[0];\n\t\t\t\tif (target.doNotScroll) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar duration = 400;\n\n\t\t\t\tvar scrollTo = target.scrollLeft + target.clientWidth;\n\t\t\t\t$(target)\n\t\t\t\t\t.animate({\n\t\t\t\t\t\tscrollLeft: scrollTo\n\t\t\t\t\t}, {\n\t\t\t\t\t\tduration: duration\n\t\t\t\t\t});\n\n\t\t\t\ttarget.doNotScroll = 'scrollable-right';\n\t\t\t\t$timeout(\n\t\t\t\t\tscope.scrollCheck,\n\t\t\t\t\tduration\n\t\t\t\t);\n\t\t\t});\n\n\t\t\t// finish scroll position to nearest column or page\n\t\t\tscope.scrollfix = function(){\n\t\t\t\tvar target = element[0];\n\t\t\t\tvar duration = 200;\n\t\t\t\tif (target.doNotScroll) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// what direction?\n\t\t\t\tvar round = 'ceil';\n\t\t\t\tif (target.scrollLeft < target.scrollLeftLast) {\n\t\t\t\t\tround = 'floor';\n\t\t\t\t}\n\t\t\t\t// finish scrolling - to closest column\n\t\t\t\tvar columns = Math[round](target.scrollLeft / target.firstElementChild.firstElementChild.clientWidth);\n\t\t\t\tvar scrollTo = target.firstElementChild.firstElementChild.clientWidth * columns;\n\t\t\t\t// go\n\t\t\t\t$(target).animate({\n\t\t\t\t\tscrollLeft: scrollTo\n\t\t\t\t}, {\n\t\t\t\t\tduration: duration\n\t\t\t\t});\n\t\t\t\t// done\n\t\t\t\ttarget.doNotScroll = true;\n\t\t\t\t$timeout(\n\t\t\t\t\tscope.scrollCheck,\n\t\t\t\t\tduration\n\t\t\t\t);\n\t\t\t};\n\t\t\t$(element).scroll(function(){\n\t\t\t\twindow.clearTimeout(scope.scrollfix_timeout);\n\t\t\t\tscope.scrollfix_timeout = window.setTimeout(function(){\n\t\t\t\t\tscope.scrollfix();\n\t\t\t\t},222); // timeout must be greater than duration of \n\t\t\t});\n\n\t\t\t// ends - disable arrow when at beginning or end\n\t\t\tscope.scrollCheck = function () {\n\t\t\t\tvar target = element[0];\n\t\t\t\ttarget.doNotScroll = false;\n\t\t\t\ttarget.scrollLeftLast = target.scrollLeft;\n\t\t\t\tif (target.scrollLeft<10) {\n\t\t\t\t\t$(element).siblings('[scrollable-left]').addClass('scrollEnd');\n\t\t\t\t} else {\n\t\t\t\t\t$(element).siblings('[scrollable-left]').removeClass('scrollEnd');\n\t\t\t\t}\n\t\t\t\tif (target.scrollLeft > ( target.scrollWidth - target.parentElement.scrollWidth - 10 ) ) {\n\t\t\t\t\t$(element).siblings('[scrollable-right]').addClass('scrollEnd');\n\t\t\t\t} else {\n\t\t\t\t\t$(element).siblings('[scrollable-right]').removeClass('scrollEnd');\n\t\t\t\t}\n\t\t\t};\n\t\t\t$timeout(\n\t\t\t\tscope.scrollCheck,\n\t\t\t\t500\n\t\t\t);\n\t\t\t$(window).on('resize',scope.scrollCheck);\n\t\t\tscope.$on('$destroy',function(){\n\t\t\t\t$(window).off('resize',scope.scrollCheck);\n\t\t\t});\n\t\t}\n\t}\n})\n\n;",
    "angular.module('ListModule.filters', [])\n\n.filter('firstWord', function () {\n\treturn function (string) {\n\t\tvar all = string.split(' ');\n\t\treturn all[0];\n\t};\n})\n\n.filter('orderObjectBy', function () {\n\treturn function (items, field, reverse) {\n\t\tvar filtered = [];\n\t\tangular.forEach(items, function (item) {\n\t\t\tfiltered.push(item);\n\t\t});\n\t\tfiltered.sort(function (a, b) {\n\t\t\tif (field.indexOf('.')) {\n\t\t\t\tvar fields = field.split('.');\n\t\t\t\tif (a[fields[0]] && b[fields[0]]) {\n\t\t\t\t\treturn (a[fields[0]][fields[1]] > b[fields[0]][fields[1]] ? 1 : -1);\n\t\t\t\t} else {\n\t\t\t\t\treturn -1; \n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn (a[field] > b[field] ? 1 : -1);\n\t\t\t}\n\t\t});\n\t\tif (reverse) filtered.reverse();\n\t\treturn filtered;\n\t};\n})\n\n;",
    "angular.module('ListModule.services', [])\n\n.factory('ContentService', [\"$q\", \"$http\", function ($q, $http) {\n\treturn {\n\n\t\tgetAll: function (query) {\n\t\t\tvar deffered = $q.defer();\n\t\t\t$http({\n\t\t\t\turl: window.env.api.host+'/all',\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json; charset=utf-8',\n\t\t\t\t\t'X-Host': window.location.host\n\t\t\t\t}\n\t\t\t}).then(function(response){\n\t\t\t\tdeffered.resolve(response.data.data);\n\t\t\t},function(error){\n\t\t\t\tdeffered.reject(error);\n\t\t\t});\n\t\t\treturn deffered.promise;\n\t\t}\n\n\t}\n}])\n\n.factory('AccountService', [\"$q\", function ($q) {\n\treturn {\n\n\t\tlogout: function() {\n\t\t\tvar jwt = window.location.origin + \"-jwt\";\n\t\t\twindow.localStorage.removeItem(jwt);\n\t\t\twindow.location.href = window.location.origin;\n\t\t},\n\t\tcurrentUser: function () {\n\t\t\tvar def = $q.defer();\n\t\t\tStamplay.User.currentUser()\n\t\t\t\t.then(function (response) {\n\t\t\t\t\tif (response.user === undefined) {\n\t\t\t\t\t\tdef.reject(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdef.resolve(response.user);\n\t\t\t\t\t}\n\t\t\t\t}, function (error) {\n\t\t\t\t\tdef.reject();\n\t\t\t\t})\n\t\t\treturn def.promise;\n\t\t}\n\n\t}\n}])\n\n\n.factory('EventService', [\"$rootScope\", \"$http\", \"$q\", function ($rootScope, $http, $q) {\n\treturn {\n\n\t\tgetEvents: function (query) {\n\t\t\tvar deffered = $q.defer();\n\t\t\t$http({\n\t\t\t\turl: window.env.api.host+'/events?'+$.param(query),\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json; charset=utf-8',\n\t\t\t\t\t'X-Host': window.location.host\n\t\t\t\t}\n\t\t\t}).then(function(response){\n\t\t\t\tdeffered.resolve(response);\n\t\t\t},function(error){\n\t\t\t\tdeffered.reject(error);\n\t\t\t});\n\t\t\treturn deffered.promise;\n\t\t}\n\n\t}\n}])\n\n\n.factory('ListService', [\"$rootScope\", \"$q\", function ($rootScope, $q) {\n\treturn {\n\n\t\tgetGuestLists: function (query) {\n\t\t\tvar deffered = $q.defer();\n\t\t\tStamplay.Query(\"object\", \"list\")\n\t\t\t\t.notExists(\"owner\")\n\t\t\t\t.exec()\n\t\t\t\t.then(function (response) {\n\t\t\t\t\tdeffered.resolve(response)\n\t\t\t\t}, function (error) {\n\t\t\t\t\tdeffered.reject(err);\n\t\t\t\t})\n\t\t\treturn deffered.promise;\n\t\t},\n\n\t\tgetUserLists: function (query) {\n\t\t\tconsole.log('getUserLists ',query);\n\t\t\tvar deffered = $q.defer();\n\n\t\t\tStamplay.Object(\"list\")\n\t\t\t\t.findByCurrentUser([\"owner\"])\n\t\t\t\t.then(function (response) {\n\t\t\t\t\tdeffered.resolve(response)\n\t\t\t\t}, function (err) {\n\t\t\t\t\tdeffered.reject(err);\n\t\t\t\t})\n\t\t\treturn deffered.promise;\n\t\t},\n\n\t\tgetList: function (id) {\n\t\t\tvar deffered = $q.defer();\n\t\t\tStamplay.Object(\"list\")\n\t\t\t\t.get({\n\t\t\t\t\t_id: id\n\t\t\t\t})\n\t\t\t\t.then(function (response) {\n\t\t\t\t\tdeffered.resolve(response)\n\t\t\t\t}, function (error) {\n\t\t\t\t\tdeffered.reject(err);\n\t\t\t\t})\n\t\t\treturn deffered.promise;\n\t\t},\n\n\t\taddNew: function (list) {\n\t\t\tvar deffered = $q.defer();\n\n\t\t\tStamplay.Object(\"list\")\n\t\t\t\t.save(list)\n\t\t\t\t.then(function (response) {\n\t\t\t\t\tdeffered.resolve(response)\n\t\t\t\t}, function (err) {\n\t\t\t\t\tdeffered.reject(err);\n\t\t\t\t})\n\t\t\treturn deffered.promise\n\t\t},\n\t\tdeleteAll: function () {\n\t\t\tvar deffered = $q.defer();\n\t\t\tStamplay.Object(\"list\")\n\t\t\t\t.findByCurrentUser([\"owner\"])\n\t\t\t\t.then(function (response) {\n\t\t\t\t\tfor (var d in response.data) {\n\t\t\t\t\t\tStamplay.Object(\"list\")\n\t\t\t\t\t\t\t.remove(response.data[d].id)\n\t\t\t\t\t\t\t.then(function (response) {\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\tdeleteList: function (id) {\n\t\t\tvar deffered = $q.defer();\n\t\t\tStamplay.Object(\"list\")\n\t\t\t\t.remove(id)\n\t\t\t\t.then(function (response) {\n\t\t\t\t\tdeffered.resolve(response)\n\t\t\t\t}, function (err) {\n\t\t\t\t\tdeffered.reject(err);\n\t\t\t\t})\n\t\t\treturn deffered.promise;\n\t\t},\n\t\tupdateList: function (list) {\n\t\t\tvar deffered = $q.defer();\n\t\t\tStamplay.Object(\"list\")\n\t\t\t\t.update(list._id, list)\n\t\t\t\t.then(function (response) {\n\t\t\t\t\tdeffered.resolve(response)\n\t\t\t\t}, function (err) {\n\t\t\t\t\tdeffered.reject(err);\n\t\t\t\t})\n\t\t\treturn deffered.promise;\n\t\t}\n\n\t}\n}]);"
  ]
}