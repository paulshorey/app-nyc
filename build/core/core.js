/**
 * younow - v1.67.1
 * http://www.younow.com
 *
 * Copyright (c) 2016 YouNow
 * Licensed MIT <https://raw.github.com/younow/website/master/LICENSE>
 */

!function(){angular.module("younow.core.services",["younow.core.services.channel","younow.core.services.pusher"]),angular.module("younow.core.directives",[]),angular.module("younow.core",["younow.core.services","younow.core.directives"])}(),function(){angular.module("younow.core.directives").directive("ynModalDraggable",["$timeout","$document","$window",function($timeout,$document,$window){return{restrict:"A",compile:function(scope,elem,attr,ctrl){return{post:function(){$timeout(function(){function mousemove(event){angular.element(document.getElementById("modalWindow"))[0].style.setProperty("top","0","important"),y=event.clientY-element[0].clientHeight,x=event.clientX-element[0].clientWidth/2,element.css({top:y+"px",left:x+"px"})}function mouseup(){element.css({cursor:"default"}),$document.unbind("mousemove",mousemove),$document.unbind("mouseup",mouseup)}if("profile-summary-wrapper"!==elem.$$element.parent().attr("window-class"))return!1;var x,y,element=elem.$$element;element.css({position:"fixed",left:"40%"}),element.on("mousedown",function(event){var noDragging=!1;if(-1===event.originalEvent.target.className.indexOf("yn-modal-draggable")&&(noDragging=!0),("TEXTAREA"===event.originalEvent.target.tagName||"INPUT"===event.target.tagName||"BUTTON"===event.target.tagName)&&(noDragging=!0),!noDragging){if(element.css({cursor:"move"}),3===event.originalEvent.which)return!1;event.preventDefault(),$document.on("mousemove",mousemove),$document.on("mouseup",mouseup)}})},0)}}}}}]).directive("windowClass",["$timeout",function($timeout){return{restrict:"A",compile:function(scope,elem,attr,ctrl){return{post:function(){$timeout(function(){angular.element(elem.$$element[0]).removeClass(elem.windowClass),angular.element(elem.$$element[0]).children().addClass(elem.windowClass)},0)}}}}}])}(),function(){angular.module("younow.core.directives").directive("scrolledClass",function($window){return{restrict:"A",scope:{scrolledClass:"@"},link:function(scope,element,attrs){angular.element($window).on("scroll",function(){this.pageYOffset>(scope.scrolledClass||0)?element.addClass("scrolled"):element.removeClass("scrolled")}),scope.$on("$destroy",function(){angular.element($window).off("scroll")})}}}).directive("onlyScroll",function(){return{restrict:"A",link:function(scope,element,attrs){var horizontalScroll=element[0].attributes["horizontal-scroll"];element.on("mousewheel",function(event){event.preventDefault(),void 0===horizontalScroll?element.scrollTop(element.scrollTop()-event.originalEvent.wheelDelta):element.scrollLeft(element.scrollLeft()-event.originalEvent.wheelDelta)})}}}).directive("infiniteScroll",["$window","$document",function($window,$document){return{scope:{infiniteScroll:"&",canLoad:"&"},link:function(scope,element,attrs){var offset=parseInt(attrs.threshold)||0,e=element[0],atBottom=function(){return e.scrollTop+e.offsetHeight>=e.scrollHeight-offset},scrollHandler=function(){if(!scope.loading&&scope.canLoad()&&atBottom()){scope.loading=!0;var request=scope.infiniteScroll();request&&request.then?request.then(function(){scope.loading=!1}):scope.loading=!1}};attrs.pagescroll&&(element.on("$destroy",function(){$document.unbind("scroll",scrollHandler)}),element=$document,atBottom=function(){return $document.scrollTop()+$window.innerHeight>=$document[0].body.offsetHeight-offset}),void 0===scope.canLoad()&&(scope.canLoad=function(){return!0}),element.bind("scroll",scrollHandler)}}}])}(),function(){window.clearSelection=function(){var sel;if((sel=document.selection)&&sel.empty)sel.empty();else{window.getSelection&&window.getSelection().removeAllRanges();var activeEl=document.activeElement;if(activeEl){var tagName=activeEl.nodeName.toLowerCase();("textarea"==tagName||"input"==tagName&&"text"==activeEl.type)&&(activeEl.selectionStart=activeEl.selectionEnd)}}},angular.module("younow.core.directives").directive("ynEnter",function(){return{restrict:"A",link:function(scope,elements,attrs){elements.bind("keydown keypress",function(event){13===event.which&&(scope.$apply(function(){scope.$eval(attrs.ynEnter)}),event.preventDefault())})}}}).directive("preventDefault",function(){return{restrict:"A",link:function(scope,elem,attrs){(attrs.ngClick||""===attrs.href||"#"===attrs.href)&&elem.on("click dblclick",function(e){e.preventDefault()})}}}).directive("copyOnClick",function($timeout){return{restrict:"A",link:function(scope,element,attrs){element.on("click",function(){this.select(),window.document.execCommand("copy")&&(window.copyHref=angular.element(this),window.copyHref.trigger("hrefCopied"),$timeout(function(){window.copyHref.trigger("hrefCopied"),window.clearSelection()},1e3))})}}}).directive("ynOnChange",function(){return{restrict:"A",link:function(scope,element,attrs){var onChangeHandler=scope.$eval(attrs.ynOnChange);element.bind("change",function(event){for(var params=attrs.params.split(","),i=0;i<params.length;i++)"event"!==params[i]&&"$event"!==params[i]?void 0!==scope[params[i]]?params[i]=scope[params[i]]:params.splice(i,1):params[i]=event;onChangeHandler.apply(this,params)})}}}).directive("cameraValid",function($interval){return{restrict:"A",scope:{onValid:"&",onInvalid:"&"},link:function(scope,ele,attrs){var checkForDuration,attemptsLeft=20;if("VIDEO"!=ele[0].tagName)throw new Error("This element must be a tag! "+(ele.id||""));ele[0].onplay=function(){void 0!==checkForDuration&&($interval.cancel(checkForDuration),attemptsLeft=20),checkForDuration=$interval(function(){attemptsLeft>0?--attemptsLeft:$interval.cancel(checkForDuration),(ele[0].readyState>0||!attemptsLeft)&&(ele[0].duration===1/0&&void 0!==scope.onValid&&scope.onValid(),ele[0].duration!==1/0&&void 0!==scope.onInvalid&&scope.onInvalid(),$interval.cancel(checkForDuration))},200)},scope.$on("$destroy",function(){void 0!==checkForDuration&&$interval.cancel(checkForDuration)})}}}).directive("passFocusTo",function($timeout,$window){return{link:function(scope,element,attrs){element.on("click",function($event){return $window.getSelection().toString().length>0?!1:void $timeout(function(){for(var elem=element.parent();elem[0].id!=attrs.focusParent;)elem=elem.parent();elem.find("#"+attrs.passFocusTo)[0].focus()})})}}}).directive("dynamicAlert",["$compile",function($compile){return{restrict:"A",replace:!0,link:function(scope,ele,attrs){scope.$watch(attrs.dynamicAlert,function(html){ele.html(html),$compile(ele.contents())(scope)})}}}]).directive("toggleD",function(){return{restrict:"A",link:function(scope,elem,attrs){elem.on("mouseenter",function(e){elem.timeoutToggle&&window.clearTimeout(elem.timeoutToggle),elem.timeoutToggle=window.setTimeout(function(){elem.addClass("selected")},1e3)}),elem.on("click",function(e){elem.timeoutToggle&&window.clearTimeout(elem.timeoutToggle),elem.toggleClass("selected")}),elem.on("mouseleave",function(e){elem.timeoutToggle&&window.clearTimeout(elem.timeoutToggle),elem.removeClass("selected")})}}})}(),function(){angular.module("younow.core.services").directive("ab",["ab",function(ab){return{restrict:"AE",templateUrl:function(elem,attrs){return"angularjsapp/src/"+ab.app+"/services/ab/"+attrs.id+".tpl.html"},link:function(scope,elem,attrs,controller){var experiment=ab.experiments[attrs.id],split=ab.variant(attrs.id);scope.abexperiment=attrs.id,scope.abvariant=split,experiment.variants&&experiment.variants[split]&&(scope.abvalue=experiment.variants[split]),elem.addClass("ab-"+attrs.id),elem.addClass("ab-"+attrs.id+"-"+split)}}}]).factory("AbCore",function($location,ApiCore){var Api,AbCore={},params=$location.search();return AbCore.Base=function(options){"use strict";if(!(this instanceof AbCore.Base))throw new Error("abCore.Base needs to be called with the new keyword");if(!options.experiments)throw new Error("An experiments option is required for the abCore");if(!options.app)throw new Error("An app option (mobile or desktop) must be specified");if(!options.captureCallback)throw new Error("A captureCallback option must be specified for tracking");"mobile"==options.app?this.app="mobile":this.app="app",Api=new ApiCore.Base(options.config),this.experiments=options.experiments,this.variant=function(id,conditionsMap){var experiment=this.experiments[id];if(params["ab_"+id])return params["ab_"+id];if(experiment.backendExperiment)return options.BEexperiments&&options.BEexperiments[id]?options.BEexperiments[id]:experiment.na;if(experiment.variantOverload)return experiment.variantOverload;if(Api.store("ab_"+id)){var local=Api.store("ab_"+id);return"na"==local?"control":local}var conditions=experiment.selectionAttributes;if(conditions){if(conditionsMap)for(var item in conditionsMap)if("newVisitor"!==item&&conditionsMap[item]!=conditions[item])return Api.store("ab_"+id,"na"),"control";if(conditions.newVisitor&&!window.newVisitor)return Api.store("ab_"+id,"na"),"control"}if(100*Math.random()>experiment.trafficAllocation)return Api.store("ab_"+id,"na"),"control";var split;if(Array.isArray(experiment.variants))split=experiment.variants[Math.floor(100*Math.random()/(100/experiment.variants.length))];else{var variants=[];for(var variant in experiment.variants)variants.push(variant);split=variants[Math.floor(100*Math.random()/(100/variants.length))]}return Api.store("ab_"+id,split),options.captureCallback({event:"JOINED_EXPERIMENT",extradata:id,field1:split,field2:experiment.version,field3:options.app_version}),split}},AbCore})}(),angular.module("younow.core.services.channel",[]).factory("broadcasterServiceCore",function(){var service={};return service.Base=function(){this.channelFormat=function(data,data2){if(!data)return data;if(data2&&(data=angular.extend(data,data2)),data.user&&(data=angular.extend(data,data.user)),data.profile=data.profileUrlString=data.profile||data.profileUrlString,data.length&&(data.length=parseInt(data.length)),data.viewers&&(data.viewers=parseInt(data.viewers)),data.likes&&(data.likes=parseInt(data.likes)),data.shares&&(data.shares=parseInt(data.shares)),data.latestSubscriptions&&data.totalSubscriptions&&(data.latestSubscriptionsPlus=data.totalSubscriptions-data.latestSubscriptions.length||0),data.disabledGoodies){var disabledGoodies=angular.extend(data.disabledGoodies);data.disabledGoodies={};for(var goo in disabledGoodies)data.disabledGoodies[disabledGoodies[goo]]=!0}if(data.subscribersCount&&(data.subscribersCount=parseInt(data.subscribersCount),data.subscribersCount>0?data.subscribersString=data.subscribersCount+" Subscriber"+(1!=data.subscribersCount?"s":""):data.subscribersString="0 Subscribers"),data.latestSubscriptions&&Object.keys(data.latestSubscriptions).length>3){var latestSubscriptions=data.latestSubscriptions,latestSubscriptionsAdd=0;data.latestSubscriptions={};var i=0;for(var k in latestSubscriptions)5>i?data.latestSubscriptions[k]=latestSubscriptions[k]:latestSubscriptionsAdd++,i++;data.latestSubscriptionsPlus=(data.latestSubscriptionsPlus||0)+latestSubscriptionsAdd}return data}},service}),function(){angular.module("younow.core.services").factory("ConfigCore",function($location){function formatConfig(data){return"https:"===window.location.protocol&&-1===data.ServerCDNBaseUrl.indexOf("https")&&(data.ServerCDNBaseUrl=data.ServerCDNBaseUrl.replace("http","https")),"https:"===window.location.protocol&&-1===data.ServerLocalBaseUrl.indexOf("https")&&(data.ServerLocalBaseUrl=data.ServerLocalBaseUrl.replace("http","https")),"https:"===window.location.protocol&&-1===data.ServerRecommendationsBaseUrl.indexOf("https")&&(data.ServerRecommendationsBaseUrl=data.ServerRecommendationsBaseUrl.replace("http","https")),"https:"===window.location.protocol&&-1===data.TrackingHost.indexOf("https")&&(data.TrackingHost=data.TrackingHost.replace("http","https")),"https:"===window.location.protocol&&-1===data.PlayDataBaseUrl.indexOf("https")&&(data.PlayDataBaseUrl=data.PlayDataBaseUrl.replace("http","https")),"https:"===window.location.protocol&&-1===data.ServerHomeBaseUrl.indexOf("https")&&(data.ServerHomeBaseUrl=data.ServerHomeBaseUrl.replace("http","https")),"https:"===window.location.protocol&&-1===data.BadgeBaseUrl.indexOf("https")&&(data.BadgeBaseUrl=data.BadgeBaseUrl.replace("http","https")),data}var ConfigCore={};return ConfigCore.Base=function(){this.params=$location.search(),this.settings=formatConfig(window.bootstrapConfig),this.host=this.params.host||window.location.host,this.buybarsiframe=!1,this.newVisitor=window.newVisitor=window.localStorage.trpx_device_id?!1:!0,this.bootstrap={adminRoles:[1,2,3,4,5],cdnDev:"cdnv2-vd.younow.com",cdnProduction:"cdn2.younow.com",facebookAppId:0x9bdd06215862,flashVersion:"47.35",googleClientId:"619368150599-2ef6s6o5dqgv6oqoq5tevtqo1k7gni12.apps.googleusercontent.com",googleAnalyticsId:"UA-24148895-1",jwplayerKey:"gyoz1D2yoy+GG57wtwrgni10vNZ0+43mBkBYhw==",TM_DOMAIN:"images1.younow.com",TM_ID:"7jnw4jh4"}},ConfigCore})}(),angular.module("younow.core.services.pusher",[]).factory("pusherCore",function(){var pusher={};return pusher}),angular.module("younow.core.services").factory("TrackingPixelCore",function($state,$http,$window,ApiCore){function generateTrackingId(){for(var text="",possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;10>i;i++)text+=possible.charAt(Math.floor(Math.random()*possible.length));return text}function incrementSession(){Api.store("trpxId",generateTrackingId()),Api.store("countSessionsEnable")&&Api.store("countSessions",Api.store("countSessions")+1),Api.store("countSessionArrivals",0),Api.store("trpxTime",(new Date).getTime())}function formatParams(params){var result={};for(var param in params)result[localVars._paramsMap[param]]=params[param];return result}var Api,TrackingPixelCore={},localVars={_paramsMap:{host:0,event:1,dateday:2,userid:3,session:4,broadcastid:5,doorid:6,userlevel:7,broadcastscount:8,unspentcoins:9,usertype:10,extradata:11,coins:12,points:13,platform:14,sourceid:15,domain:16,field1:17,field2:18,field3:19,field4:20,field5:21,field6:22,field7:23,pixel:24},_paramTypes:{host:"string",event:"string",dateday:"string",userid:"number",session:"string",broadcastid:"number",doorid:"number",userlevel:"number",broadcastscount:"number",unspentcoins:"number",usertype:"number",extradata:"string",coins:"number",points:"number",platform:"number",sourceid:"number",domain:"string",field1:"string",field2:"string",field3:"string",field4:"string",field5:"string",field6:"string",field7:"string",pixel:"string"},_localStorageDeviceId:"trpx_device_id"};return TrackingPixelCore.Base=function(options){"use strict";if(!(this instanceof TrackingPixelCore.Base))throw new Error("TrackingPixelCore.Base needs to be called with the new keyword");Api=new ApiCore.Base(options.config),options.paramsMap&&"object"==typeof options.paramsMap&&angular.extend(localVars._paramsMap,options.paramsMap),options.paramTypes&&"object"==typeof options.paramTypes&&angular.extend(localVars._paramTypes,options.paramTypes),localVars._countSessions=Api.store("countSessions"),Api.store(localVars._localStorageDeviceId)&&(null==localVars._countSessions||localVars._countSessions[0])&&(Api.store("countSessionsEnable",null),Api.store("countSessions",0),Api.store("countSessionArrivals",0)),Api.store(localVars._localStorageDeviceId)||(Api.store(localVars._localStorageDeviceId,generateTrackingId()),Api.store("countSessionsEnable","true"),Api.store("countSessions",0),Api.store("countSessionArrivals",0)),this.checkTrpxSession=function(){var lastTrpxSessionTime=Api.store("trpxTime"),currentTime=(new Date).getTime();lastTrpxSessionTime&&null!==Api.store("trpxId")?lastTrpxSessionTime&&currentTime-lastTrpxSessionTime>18e5&&incrementSession():incrementSession()},this.checkTrpxSession(),this.captureHelper=function(params){for(var param in params)"number"!=localVars._paramTypes[param]||isNaN(params[param])||(params[param]=parseInt(params[param])||0),typeof params[param]!==localVars._paramTypes[param]&&console.warn("Warning: "+param+" should have a type of "+localVars._paramTypes[param]);return $http.get(Api.buildPixelTracking(formatParams(params)))},this.trackArrivalHelper=function(track){track.broadcastscount||(track.broadcastscount=2),track.field3=Api.getLinkType(window.location.pathname,window.location.search),track.field6=Api.getReferrer();var linkTerm=Api.getLinkTerm(window.location.pathname,window.location.search,track.field3),referralPath=Api.getReferrerPath();return linkTerm&&(track.field2=linkTerm),referralPath&&(track.field7=referralPath),track.field5||(track.field5=""),track.field6||(track.field6=""),this.capture(track)},this.trackClick=function(action,params){var track={event:"CLICK",extradata:action,points:Api.store("countSessionsEnable")?Api.store("countSessions")||0:0};return track=angular.extend(track,params),this.capture(track)},this._getLocalVar=function(varName){return localVars["_"+varName]}},TrackingPixelCore}),function(){angular.module("younow.core.services").factory("ApiCore",function($window,$http,$document,$q,$sce,$timeout,$interval,$rootScope,$location,$filter){function createCookie(key,value,exp){var date=new Date;date.setTime(date.getTime()+24*exp*60*60*1e3);var expires="; expires="+date.toGMTString();document.cookie=key+"="+value+expires+"; path=/"}function readCookie(key){for(var nameEQ=key+"=",ca=document.cookie.split(";"),i=0,max=ca.length;max>i;i++){for(var c=ca[i];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(nameEQ))return c.substring(nameEQ.length,c.length)}return null}var ApiCore={};return ApiCore.Base=function(config){if(!config)throw new Error("The ApiCore requires a config");this.sortObject=function(obj){var keys=[],sorted_obj={};for(var key in obj)obj.hasOwnProperty(key)&&keys.push(key);return keys.sort(),angular.forEach(keys,function(i,key){sorted_obj[keys[key]]=obj[keys[key]]}),sorted_obj},this.splitter=function(options){if(options&&"object"!=typeof options)throw new Error("Splitter can only take an array");var option,randomNum=Math.floor(100*Math.random()),i=0,optionsArray=[];for(option in options)optionsArray.push(Number(option));for(optionsArray.sort(function(a,b){return a-b}),i;i<optionsArray.length;i++)if(randomNum<=optionsArray[i]||randomNum>=optionsArray[i]&&optionsArray.length-1===i)return options[optionsArray[i]]},this.get=function(method,data,usecdn,secured){var url,base=!usecdn||$window.nonCDN?config.settings.ServerLocalBaseUrl:config.settings.ServerCDNBaseUrl;return url="http"===method.substr(0,4)?method:secured?config.settings.ServerSecureLocalBaseUrl+"/php/api/"+method:base+"/php/api/"+method,data=data?data:{},"www.younow.com"===config.params.host&&(data.callback="JSON_CALLBACK"),usecdn&&data&&(data=this.sortObject(data)),angular.forEach(data,function(value,key){url+="/"+key+"="+value}),this.addToStack(method,"lastApiStack"),window.YouNow.loadingTime&&window.YouNow.loadingTime.request&&window.YouNow.loadingTime.request(),data.callback?$http.jsonp(url).success(function(data){window.YouNow.loadingTime&&window.YouNow.loadingTime.response&&window.YouNow.loadingTime.response()}):$http.get(url).success(function(data){window.YouNow.loadingTime&&window.YouNow.loadingTime.response&&window.YouNow.loadingTime.response()})},this.post=function(method,data,secured,customUrl,noSerialize){var url;return url=secured?config.settings.ServerSecureLocalBaseUrl+"/php/api/"+method:config.settings.ServerLocalBaseUrl+"/php/api/"+method,customUrl&&(url=customUrl),data=noSerialize?data:this.serialize(data),window.YouNow.loadingTime&&window.YouNow.loadingTime.request&&window.YouNow.loadingTime.request(),$http({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:data,url:url}).success(function(data){window.YouNow.loadingTime&&window.YouNow.loadingTime.response&&window.YouNow.loadingTime.response()})},this.poll=function(callback,id,delay,defaultDelay){this.polls||(this.polls={}),this.polls[id]&&$interval.cancel(this.polls[id]),defaultDelay||(defaultDelay=30),delay||(delay=defaultDelay),this.polls[id]=$interval(function(){callback()},1e3*delay)},this.trustedSrc=function(src){return $sce.trustAsResourceUrl(src)},this.trustedHTML=function(text){return text.$$unwrapTrustedValue?text:$sce.trustAsHtml(text)},this.serialize=function(obj){var name,value,fullSubName,subName,subValue,innerObj,i,query="";for(name in obj)if(value=obj[name],value instanceof Array)for(i=0;i<value.length;++i)subValue=value[i],fullSubName=name+"["+i+"]",innerObj={},innerObj[fullSubName]=subValue,query+=this.serialize(innerObj)+"&";else if(value instanceof Object)for(subName in value)subValue=value[subName],fullSubName=name+"["+subName+"]",innerObj={},innerObj[fullSubName]=subValue,query+=this.serialize(innerObj)+"&";else void 0!==value&&null!==value&&(query+=encodeURIComponent(name)+"="+encodeURIComponent(value)+"&");return query.length?query.substr(0,query.length-1):query},this.fullName=function(user){if(!user)return"";var profile=user.profile||user.profileUrlString,useprofile=user.useprofile||user.useProfile;return 1==useprofile?profile:!user.firstName&&user.username?user.username:(user.firstName||"")+(user.lastName?" "+user.lastName:"")},this.friendlyName=function(user){return"0"!==user.useprofile?user.profile:user.firstName},this.cleanLocation=function(data,twopart){return twopart&&data.state&&!data.city&&(data.city=data.state),(data.city?data.city+", ":"")+(data.state&&!twopart?data.state+" ":"")+data.country},this.linksniffer=/((http(s?)(:\/\/))?(([w]{3}|(.*))\.)?([a-z|0-9])+\.(com(\.au)?|org|me|net|ly|be|gl|co|it|info|(co(\.))?uk|ca|nz|tv)(\/[^\s]+)*)+/g,this.findLinks=function(text){if(!text)return[];text=text.replace(/:\/\/www./g,"://"),text=text.replace(/www./g," http://"),text=text.replace(/&nbsp;/g," ");var links=[],linksniffer=this.linksniffer;return text.split(/\s+/).map(function(t){t.match(linksniffer)&&links.push(t)}),links},this.linkify=function(text){if(!text)return text;text.$$unwrapTrustedValue&&(text=text.$$unwrapTrustedValue(text));var htmlStart=text.indexOf("<"),plainText=htmlStart>-1?text.substr(0,htmlStart):text,html=htmlStart>-1?text.substr(htmlStart):"",linksniffer=this.linksniffer,tokens=plainText.split(" ").map(function(t){return t.replace(linksniffer,function(url){var href="http"!==url.substr(0,4)?"http://"+url:url;return'<a href="'+href.replace(/("|').*$/g,"")+'" target="_blank" rel="nofollow">'+url.replace(/("|').*$/g,"")+"</a>"})});return tokens.join(" ")+html},this.stripHTML=function(text){return text.replace(/<[^>]+>/gm,"")},this.prepareDescription=function(text){return text=this.linkify(text)||"This profile does not have a description",$sce.trustAsHtml(text)},this["goto"]=function(path){return path?("http"==path.substr(0,4)&&(path=path.slice(path.indexOf(path.split("/")[2]))),void $location.path(path)):!1},this.squashedNumber=function(num,size){if(void 0===num||null===num)return"";"string"==typeof num&&(num=Number(num.replace(",","")));var digits=num.toString().length,decimals=size==digits-1?1:0;return num=digits>size&&digits>=10?$filter("number")(num/1e9,decimals)+"B":digits>size&&digits>=7?$filter("number")(num/1e6,decimals)+"M":digits>size&&digits>=4?$filter("number")(num/1e3,decimals)+"k":$filter("number")(num)},this.store=function(key,value){var lsSupport=!0;try{$window.localStorage.setItem("isLocalStorage",!0)}catch(error){lsSupport=!1}var data;if("undefined"!=typeof value&&null!==value&&("object"==typeof value&&(value=JSON.stringify(value)),lsSupport?$window.localStorage.setItem(key,value):createCookie(key,value,3650)),"undefined"==typeof value){data=lsSupport?$window.localStorage.getItem(key):readCookie(key);try{data=JSON.parse(data)}catch(e){data=data}return data}null===value&&(lsSupport?$window.localStorage.removeItem(key):createCookie(key,"",-1))},this.ArrayToObject=function(array){var i,newObject={};for(i=0;i<array.length;++i)newObject[i]=array[i];return newObject},this.addToStack=function(data,stackName){$window.bugsnagAdditionalParams&&$window.bugsnagAdditionalParams[stackName]&&(5===$window.bugsnagAdditionalParams[stackName].length&&$window.bugsnagAdditionalParams[stackName].pop(),$window.bugsnagAdditionalParams[stackName].unshift(data),$window.bugsnagAdditionalParams[stackName+"Object"]=this.ArrayToObject($window.bugsnagAdditionalParams[stackName]))},this.generateTrackingId=function(){for(var text="",possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;10>i;i++)text+=possible.charAt(Math.floor(Math.random()*possible.length));return text},this.getLinkType=function(requestUri,search){var linkType,pieces=requestUri.split("/"),entityTypes={b:"broadcast",p:"post",c:"comment"};return linkType="/"==requestUri?"root":-1!==search.indexOf("?yozio")?"yozio":-1!==search.indexOf("?q=")?"search":"explore"===pieces[1]?requestUri.length>9?"tag":"explore":-1!==["featured","about","info","policy","thankyou","getpartnered"].indexOf(pieces[1])?pieces[1]:-1!==["b","p","c"].indexOf(pieces[5])?entityTypes[pieces[5]]:"channel"===pieces[2]?"profile":"0"===pieces[2]?"profile":2===pieces.length?"profile":"other"},this.getLinkTerm=function(requestUri,search,linkType){var linkTerm;return-1!==["search"].indexOf(linkType)?linkTerm=search.split("?q=")[1]:-1!==["info","policy"].indexOf(linkType)?linkTerm=requestUri.split("/")[3]:-1!==["tag","featured"].indexOf(linkType)?linkTerm=requestUri.split("/")[2]:-1!==["profile","broadcast","comment","post"].indexOf(linkType)&&(linkTerm=requestUri.split("/")[1]),linkTerm},this.getReferrer=function(){var referrer=document.referrer,domain=document.referrer.split("/")[2];return referrer=0===document.referrer.length?"direct":-1!==document.referrer.indexOf("facebook.com/")?"facebook":-1!==document.referrer.indexOf("t.co/")?"twitter":-1!==document.referrer.indexOf("younow.com/")?"younow":-1!==document.referrer.indexOf("google")?"google":domain},this.getReferrerPath=function(){var path=document.referrer.substr(document.referrer.indexOf("://")+3);return path=encodeURIComponent(path).replace(/_/g,"__").replace(/%/g,"_"),path=path.substr(0,299)},this.buildPixelTracking=function(params,size){var url=config.settings.TrackingHost;size=size?size:24;for(var i=1;size>i;i++)url+=void 0!==params[i]?params[i]+"/":"/";return url+params[size]},this.trackError=function(message){$window.Bugsnag&&$window.Bugsnag.notify(message)},this.pad=function(n,width,z){return z=z||"0",n+="",n.length>=width?n:new Array(width-n.length+1).join(z)+n},this.isMEdge=function(){return/Edge\/12./i.test(navigator.userAgent)?!0:!1},this.pixelSafe=function(string,maxlength){return maxlength||(maxlength=50),string=encodeURIComponent(string).replace(/_/g,"__").replace(/%/g,"_"),string=string.substr(0,maxlength-1)},this.store("trpx_device_id")||(window.newVisitor=!0)},$window.countWatchers=function(){for(var elts=document.getElementsByClassName("ng-scope"),watches=[],visited_ids={},i=0;i<elts.length;i++){var scope=angular.element(elts[i]).scope();scope.$id in visited_ids||(visited_ids[scope.$id]=!0,watches.push.apply(watches,scope.$$watchers))}return watches.length},$window.currentScope=function(){return angular.element($window.$0).scope()},$window.getService=function(name){return-1!=window.location.search.indexOf("debugInfoEnabled")?angular.element(document.querySelector(".ng-scope")).injector().get(name):void console.warn("Use the query param with the debugInfoEnabled option to use this feature.")},ApiCore})}();
//# sourceMappingURL=core.js.map